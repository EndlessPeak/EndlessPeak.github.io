<!DOCTYPE html>
<html
  lang="zh"
  dir="ltr"
  
><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>Arch Linux 桌面环境配置 | Linux 环境配置 | 悦翎轩</title>

<meta name="generator" content="Hugo Eureka 0.9.3" />
<link rel="stylesheet" href="https://endlesspeak.github.io/css/eureka.min.3f9c102b2958d0308ef084ee682440b37aa0ca93912ed5c0980028307f924cfb413f8214a8ae653b7def936d6a1bc390.css">
<script defer src="https://endlesspeak.github.io/js/eureka.min.fa9a6bf6d7a50bb635b4cca7d2ba5cf3dfb095ae3798773f1328f7950028b48c17d06276594e1b5f244a25a6c969a705.js"></script>

















<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload"
  href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;family=Noto&#43;Sans&#43;SC:wght@400;600;700&amp;family=Source&#43;Sans&#43;Pro:wght@400;600;700&amp;display=swap"
  as="style" onload="this.onload=null;this.rel='stylesheet'">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/styles/nnfx-light.min.css"
   media="print"
  onload="this.media='all';this.onload=null" crossorigin>
<script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/highlight.min.js"
   crossorigin></script>
  <script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/languages/c.min.js"
     crossorigin></script>
  <script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/languages/cpp.min.js"
     crossorigin></script>
  <script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/languages/java.min.js"
     crossorigin></script>
  <script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/languages/python.min.js"
     crossorigin></script>
  <script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/languages/dart.min.js"
     crossorigin></script>
  <script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/languages/cmake.min.js"
     crossorigin></script>
  <script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/languages/rust.min.js"
     crossorigin></script>
<link rel="stylesheet" href="https://endlesspeak.github.io/css/highlightjs.min.2958991528e43eb6fc9b8c4f2b8e052f79c4010718e1d1e888a777620e9ee63021c2c57ec7417a3108019bb8c41943e6.css" media="print" onload="this.media='all';this.onload=null">


<script defer type="text/javascript" src="https://endlesspeak.github.io/js/fontawesome.min.15ca3da36d9676aa223d8be3b1f49c6d893c4e16cbfce12124e114e34b1f20e7f5eee796fba6948cfac4c6a9ae381fcd.js"></script>




<script defer src="https://cdn.jsdelivr.net/npm/mermaid@8.14.0/dist/mermaid.min.js" 
  integrity="sha384-atOyb0FxAgN9LyAc6PEf9BjgwLISyansgdH8/VXQH8p2o5vfrRgmGIJ2Sg22L0A0"  crossorigin></script>




<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      inlineMath: [["$", "$"],["\\(", "\\)"]],
    },
    displayMath: [
      ["$$", "$$"],
      ["\[\[", "\]\]"],
    ],
    svg: {
      fontCache: "global",
    },
  };
</script>
<link rel="icon" type="image/png" sizes="32x32" href="https://endlesspeak.github.io/images/avtar_huc2c209728b40c4588688df8c11b591ef_46235_32x32_fill_box_center_3.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://endlesspeak.github.io/images/avtar_huc2c209728b40c4588688df8c11b591ef_46235_180x180_fill_box_center_3.png">

<meta name="description"
  content="如果现在让我选择一个我心目中最好的Linux发行版，同时也是最简单的Linux发行版，作为长期甚至终身使用的Linux，我会选择的发行版是：Arch Linux！">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
      "@type": "ListItem",
      "position": 1 ,
      "name":"Docs",
      "item":"https://endlesspeak.github.io/docs/"},{
      "@type": "ListItem",
      "position": 2 ,
      "name":"Docs",
      "item":"https://endlesspeak.github.io/docs/build/"},{
      "@type": "ListItem",
      "position": 3 ,
      "name":"Linux 环境配置",
      "item":"https://endlesspeak.github.io/docs/build/operating-system-configuration/"},{
      "@type": "ListItem",
      "position": 4 ,
      "name":"Arch Linux 桌面环境配置",
      "item":"https://endlesspeak.github.io/docs/build/operating-system-configuration/linux-technology-5-1-desktop-config/"}]
}
</script>



<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://endlesspeak.github.io/docs/build/operating-system-configuration/linux-technology-5-1-desktop-config/"
    },
    "headline": "Arch Linux 桌面环境配置 | Linux 环境配置 | 悦翎轩","datePublished": "2020-02-18T20:00:00+00:00",
    "dateModified": "2020-02-18T20:00:00+00:00",
    "wordCount":  4869 ,
    "author": {
        "@type": "Person",
        "name": ["EndlessPeak"]
    },
    "publisher": {
        "@type": "Person",
        "name": "EndlessPeak",
        "logo": {
            "@type": "ImageObject",
            "url": "https://endlesspeak.github.io/images/avtar.png"
        }
        },
    "description": "\u003cp\u003e如果现在让我选择一个我心目中最好的Linux发行版，同时也是最简单的Linux发行版，作为长期甚至终身使用的Linux，我会选择的发行版是：Arch Linux！\u003c\/p\u003e"
}
</script><meta property="og:title" content="Arch Linux 桌面环境配置 | Linux 环境配置 | 悦翎轩" />
<meta property="og:type" content="article" />


<meta property="og:image" content="https://endlesspeak.github.io/images/avtar.png">


<meta property="og:url" content="https://endlesspeak.github.io/docs/build/operating-system-configuration/linux-technology-5-1-desktop-config/" />




<meta property="og:description" content="如果现在让我选择一个我心目中最好的Linux发行版，同时也是最简单的Linux发行版，作为长期甚至终身使用的Linux，我会选择的发行版是：Arch Linux！" />




<meta property="og:locale" content="zh" />




<meta property="og:site_name" content="悦翎轩" />






<meta property="article:published_time" content="2020-02-18T20:00:00&#43;00:00" />


<meta property="article:modified_time" content="2020-02-18T20:00:00&#43;00:00" />



<meta property="article:section" content="docs" />





  <body class="flex min-h-screen flex-col">
    <header
      class="min-h-16 pl-scrollbar bg-secondary-bg fixed z-50 flex w-full items-center shadow-sm"
    >
      <div class="mx-auto w-full max-w-screen-xl"><script>
    let storageColorScheme = localStorage.getItem("lightDarkMode")
    if (((storageColorScheme == 'Auto' || storageColorScheme == null) && window.matchMedia("(prefers-color-scheme: dark)").matches) || storageColorScheme == "Dark") {
        document.getElementsByTagName('html')[0].classList.add('dark')
    }
</script>
<nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0">
    <a href="/" class="me-6 text-primary-text text-xl font-bold">悦翎轩</a>
    <button id="navbar-btn" class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
        <i class="fas fa-bars"></i>
    </button>

    <div id="target"
        class="hidden block md:flex md:grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20">
        <div class="md:flex md:h-16 text-sm md:grow pb-4 md:pb-0 border-b md:border-b-0">
            <a href="/authors" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  me-4">关于</a>
            <a href="/posts/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  me-4">文章</a>
            <a href="/docs/docs/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  me-4">文档</a>
            <a href="/docs/build/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  selected-menu-item  me-4">构建</a>
            <a href="/categories" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  me-4">分类</a>
            <a href="/tags" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  me-4">标签</a>
        </div>

        <div class="flex">
            <div class="relative pt-4 md:pt-0">
                <div class="cursor-pointer hover:text-eureka" id="lightDarkMode">
                    <i class="fas fa-adjust"></i>
                </div>
                <div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id="is-open">
                </div>
                <div class="absolute flex flex-col start-0 md:start-auto end-auto md:end-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40"
                    id='lightDarkOptions'>
                    <span class="px-4 py-1 hover:text-eureka" name="Light">浅色</span>
                    <span class="px-4 py-1 hover:text-eureka" name="Dark">深色</span>
                    <span class="px-4 py-1 hover:text-eureka" name="Auto">自动</span>
                </div>
            </div>
        </div>
    </div>

    <div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id="is-open-mobile">
    </div>

</nav>
<script>
    
    let element = document.getElementById('lightDarkMode')
    if (storageColorScheme == null || storageColorScheme == 'Auto') {
        document.addEventListener('DOMContentLoaded', () => {
            window.matchMedia("(prefers-color-scheme: dark)").addEventListener('change', switchDarkMode)
        })
    } else if (storageColorScheme == "Light") {
        element.firstElementChild.classList.remove('fa-adjust')
        element.firstElementChild.setAttribute("data-icon", 'sun')
        element.firstElementChild.classList.add('fa-sun')
    } else if (storageColorScheme == "Dark") {
        element.firstElementChild.classList.remove('fa-adjust')
        element.firstElementChild.setAttribute("data-icon", 'moon')
        element.firstElementChild.classList.add('fa-moon')
    }

    document.addEventListener('DOMContentLoaded', () => {
        getcolorscheme();
        switchBurger();
    });
</script>
</div>
    </header>
    <main class="grow pt-16">
        <div class="pl-scrollbar">
          <div class="mx-auto w-full max-w-screen-2xl lg:px-4 xl:px-8">


<div class="lg:pt-12">
    <div class="flex flex-col md:flex-row bg-secondary-bg rounded">
        <div class="md:w-1/4 lg:w-1/5 border-e">
            <div class="sticky top-16 pt-6">
                










<div id="sidebar-title" class="md:hidden mx-4 px-2 pt-4 pb-2 md:border-b text-tertiary-text md:text-primary-text">
    <span class="font-semibold">目录</span>
    <i class='fas fa-caret-right ms-1'></i>
</div>

<div id="sidebar-toc"
    class="hidden md:block overflow-y-auto mx-6 md:mx-0 pe-6 pt-2 md:max-h-doc-sidebar bg-primary-bg md:bg-transparent">
    <div class="flex flex-wrap ms-4 -me-2 p-2 bg-secondary-bg md:bg-primary-bg rounded">
        <a class=" hover:text-eureka"
            href="https://endlesspeak.github.io/docs/build/operating-system-configuration/">Linux 环境配置</a>
        
        
        


    </div>
    
<ul class="ps-6">
    
    
    
    <li class="py-2">
        <div class="">
            <a class=" text-eureka  hover:text-eureka"
                href="https://endlesspeak.github.io/docs/build/operating-system-configuration/linux-technology-5-1-desktop-config/">Arch Linux 桌面环境配置</a>
        </div>
        
    </li>
    
    
    
    
    <li class="py-2">
        <div class="">
            <a class=" hover:text-eureka"
                href="https://endlesspeak.github.io/docs/build/operating-system-configuration/linux-technology-5-2-textmode-config/">Arch Linux 文本环境配置</a>
        </div>
        
    </li>
    
    
    
    
    <li class="py-2">
        <div class="">
            <a class=" hover:text-eureka"
                href="https://endlesspeak.github.io/docs/build/operating-system-configuration/linux-technology-5-3-gentoo-nvidia/">Gentoo Linux Nvidia 显卡驱动</a>
        </div>
        
    </li>
    
    
    
    
    <li class="py-2">
        <div class="">
            <a class=" hover:text-eureka"
                href="https://endlesspeak.github.io/docs/build/operating-system-configuration/linux-technology-5-4-kernel/">Linux Kernel Configuration</a>
        </div>
        
    </li>
    
    
    
    
    <li class="py-2">
        <div class="">
            <a class=" hover:text-eureka"
                href="https://endlesspeak.github.io/docs/build/operating-system-configuration/linux-technology-5-5-kde-usage/">Linux KDE 桌面使用指南</a>
        </div>
        
    </li>
    
    
    
    
    <li class="py-2">
        <div class="">
            <a class=" hover:text-eureka"
                href="https://endlesspeak.github.io/docs/build/operating-system-configuration/linux-technology-5-9-ubuntu/">Ubuntu Linux 桌面环境</a>
        </div>
        
    </li>
    
    
</ul>

</div>





            </div>

        </div>
        <div class="w-full md:w-3/4 lg:w-4/5 pb-8 pt-2 md:pt-8">
            <div class="flex">
                <div class="w-full lg:w-3/4 px-6">
                    <article class="prose">
  <h1 class="mb-4">Arch Linux 桌面环境配置</h1>

  <div
  class="text-tertiary-text not-prose mt-2 flex flex-row flex-wrap items-center"
>
  <div class="me-6 my-2">
    <i class="fas fa-calendar me-1"></i>
    <span
      >2020-02-18</span
    >
  </div>
  <div class="me-6 my-2">
    <i class="fas fa-clock me-1"></i>
    <span>10分钟阅读时长</span>
  </div>

  

  
</div>


  
  

  <p>如果现在让我选择一个我心目中最好的Linux发行版，同时也是最简单的Linux发行版，作为长期甚至终身使用的Linux，我会选择的发行版是：Arch Linux！</p>
<p>尽管入门可能会有难度，但它比任何其他的发行版都要好，它可以避免管理其他任何系统时所不得不忍受的痛苦。人们通常会想到入门难度，但最重要的其实是<strong>终身难度</strong>。同时，Arch Linux比其他发行版<strong>更有可能改变人们对Linux发行版的看法</strong>。——Luke Smith</p>
<p>下面我结合我这段时间的学习，谈谈如何在Arch Linux上打造属于我自己的工作环境。</p>
<h2 id="initialization">Initialization</h2>
<p>在刚安装完Arch Linux的电脑上依次运行下面的命令。</p>
<blockquote>
<p>注：如果是Manjaro发行版，由于开源驱动nouveau比较弱智，需要在启动选项中调参设置。</p>
<p>具体的做法是在进入grub菜单后选择Manjaro按<code>e</code>进入启动参数设置，搜索第一个<code>quiet</code>并在后面加入<code>nouveau.modeset=0</code>之后按Ctrl+X启动；</p>
<p>正常进入系统之后记得输入命令<code>sudo vim /boot/grub/grub.cfg</code> ，然后把上面的操作重复一遍。</p>
</blockquote>
<p><em>命令约定：无<code>$</code>标识符的命令代表以<code>root</code>身份执行；通常它们在终端中以<code>#</code>开头。</em></p>
<pre><code class="language-bash">archlinux login:root #以root方式登录
Password:
dhcpcd #有线网络连接时，自动分配IP地址
pacman -S vim #安装编辑器之神VIM
vim /etc/pacman.conf
</code></pre>
<p>查找<code>Color</code>并删去注释，然后在文件尾添加以下内容：</p>
<pre><code class="language-bash">[archlinuxcn]
SigLevel = Never #或者Optional TrustedOnly
Include = /etc/pacman.d/archlinuxcn
</code></pre>
<pre><code class="language-bash">vim /etc/pacman.d/archlinuxcn
#使用Ctrl+Shift+C/V向文件中加入以下内容
## 浙江大学 (浙江杭州) (ipv4, ipv6, http, https)
## Added: 2017-06-05[archlinuxcn]
Server= https://mirrors.zju.edu.cn/archlinuxcn/$arch
## 中国科学技术大学 (ipv4, ipv6, http, https)[archlinuxcn]
Server= https://mirrors.ustc.edu.cn/archlinuxcn/$arch
## 清华大学 (ipv4, ipv6, http, https)[archlinuxcn]
Server= https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch
## xTom (Hong Kong) (ipv4, ipv6, http, https)
## Added: 2017-09-18
## xTom Hong Kong Mirror[archlinuxcn]
Server= https://mirror.xtom.com.hk/archlinuxcn/$arch
## Unique Studio (湖北武汉) (ipv4, http, https)
## Added: 2017-08-02[archlinuxcn]
Server= https://mirrors.hustunique.com/archlinuxcn/$arch
## 上海科技大学 (上海) (ipv4, http, https)
## Added: 2016-04-07[archlinuxcn]
Server= https://mirrors-wan.geekpie.org/archlinuxcn/$arch
## 中国科学院开源软件协会 (北京) (ipv4, http)
## Added: 2017-02-09[archlinuxcn]
Server= http://mirrors.opencas.org/archlinuxcn/$arch
## 电子科技大学凝聚网络安全工作室 (ipv4, http)
## Added: 2016-05-28[archlinuxcn]
Server= http://mirrors.cnssuestc.org/archlinuxcn/$arch
## 网易 (ipv4, http)[archlinuxcn]
Server= http://mirrors.163.com/archlinux-cn/$arch
## 重庆大学 (ipv4, http)[archlinuxcn]
Server= http://mirrors.cqu.edu.cn/archlinuxcn/$arch
</code></pre>
<p>然后再继续执行下面的命令：</p>
<pre><code class="language-bash">pacman -S archlinuxcn-keyring #安装密钥
</code></pre>
<blockquote>
<p>可能遇到<strong>Unable to lock database</strong>错误，执行下面的命令作为解决方案：</p>
<pre><code class="language-bash">rm /var/lib/pacman/db.lck
</code></pre>
</blockquote>
<pre><code class="language-bash">pacman -Syyu #强制更新软件源列表并更新本机软件
</code></pre>
<blockquote>
<p>注1：你可能会在以后的使用过程中遇到更新出错的情况。但是请注意，用户应当对自己的滚动升级的系统稳定性负责任。用户自己决定何时升级、修改配置。Arch与其他发行版的一个不同是，Arch是真正的“DIY”发行版。抱怨系统损坏是无意义的，毕竟上游的改动不是Arch开发者的责任。</p>
<p>注2：如果是Manjaro发行版，初始执行更新软件源列表出错，运行下面命令：</p>
<pre><code class="language-bash">pacman-mirrors -i -c China -m rank
</code></pre>
<p>或者<code>sudo vim /etc/pacman.d/mirrorlist</code>并向其中添加下列内容：</p>
<pre><code class="language-bash">## 中科大
Server = https://mirrors.ustc.edu.cn/manjaro/stable/$repo/$arch
##  清华大学
Server = https://mirrors.tuna.tsinghua.edu.cn/manjaro/stable/$repo/$arch
## 上海交通大学
Server = https://mirrors.sjtug.sjtu.edu.cn/manjaro/stable/$repo/$arch
## 浙江大学
Server = https://mirrors.zju.edu.cn/manjaro/stable/$repo/$arch
</code></pre>
</blockquote>
<p>依次执行下面的命令：</p>
<pre><code class="language-bash">pacman -S nvidia #安装NVIDIA驱动
</code></pre>
<blockquote>
<p>注：关于驱动的内容，请详细地参考：<a href="https://wiki.archlinux.org/index.php/NVIDIA">Arch NVIDIA</a></p>
</blockquote>
<pre><code class="language-bash">pacman -S xorg xorg-sever #首先安装Xorg，如果使用NVIDIA闭源驱动还需要追加Xorg-xrandr
pacman -S xf86-input-synaptics #笔记本的触摸板驱动
pacman -S ttf-dejavu wqy-microhei #安装中文字体包 #注，本条见后面的中文输入法
</code></pre>
<p>新增一个普通用户，养成良好的安全习惯，日常事务用普通用户进行：</p>
<pre><code class="language-bash">useradd -m -g users -G wheel -s /bin/bash &lt;username&gt; 
#上述命令为添加用户，-m表示添加用户的登入目录（即家目录），用户名&lt;username&gt;,-G表示所属的附加群组wheel，-g指定用户所属的群组，值可以是组名，也可以是GID，用户组必须已经存在，默认值100，即users，-s指定用户登入后所使用的shell
passwd &lt;username&gt; #设置该用户的密码
ln -s /usr/bin/vim /usr/bin/vi #把vim编辑器链接到vi上（当然习惯使用vi也可以不链接，或者链接nano都行）
visudo #使用该命令为你的用户进行提权
</code></pre>
<p>使用<code>visudo</code>进入sudo file后，查找到<code># %wheel ALL=(ALL) ALL</code>，去除前面的<code>#</code>号。完成这一切后，输入<code>exit</code>退出管理员用户，并以新添加的用户身份登录。</p>
<h2 id="deepin">Deepin</h2>
<p>※安装DDE (Deepin Desktop Environment)桌面环境是最重要的一步，命令如下：</p>
<pre><code class="language-bash">$ sudo pacman -S deepin deepin-extra
</code></pre>
<blockquote>
<p>注：DDE 桌面我个人理解是Gnome系的设计理念，KDE系的外观。(注：Gnome是为对抗KDE应运而生的桌面环境)；DDE 的显示管理器默认为 <code>lightdm</code>，如果你需要安装多个桌面环境，例如将KDE Plasma和DDE 同时安装，则用下面的命令查询正在起作用的显示管理器：</p>
</blockquote>
<pre><code class="language-bash">$ sudo systemctl status sddm
$ sudo systemctl status lightdm
</code></pre>
<blockquote>
<p>如果登录管理器不能正常运作，使用下面的命令检查报错信息：</p>
</blockquote>
<pre><code class="language-bash">$ sudo journalctl -u lightdm 
</code></pre>
<p>可以选择自己喜欢的显示管理器启用，并弃用另一个显示管理器。简要命令如下：</p>
<pre><code class="language-bash">$ sudo systemctl enable lightdm
$ sudo systemctl disable sddm
</code></pre>
<p>为Deepin切换Deepin风格的登录界面：</p>
<pre><code class="language-bash">$ sudo vim /etc/lightdm/lightdm.conf
</code></pre>
<p>将<code>/greeter-session=example-gtk-gnome</code>改为<code>/greeter-session=lightdm-deepin-greeter</code>并去掉前面的<code>#</code>号。</p>
<h2 id="kde-plasma">KDE Plasma</h2>
<p>※如果选用KDE Plasma，则安装KDE桌面环境是最重要的一步。如果觉得整体安装包过大，可以安装虚包：</p>
<pre><code class="language-bash">$ sudo pacman -S plasma kde-applications #完整包
$ sudo pacman -S plasma-meta kde-applications-meta #虚包
</code></pre>
<p>安装图形登录界面：</p>
<pre><code class="language-bash">$ sudo pacman -S sddm sddm-kcm
$ sudo systemctl enable sddm #开启sddm服务，以自动登录到显示管理器
</code></pre>
<h2 id="basic-apps">Basic Apps</h2>
<p>安装日常使用的软件命令如下：</p>
<h3 id="nvidia">NVIDIA</h3>
<p>如果是使用NVIDIA闭源驱动，则使用下列命令编辑启动管理器的脚本：</p>
<pre><code class="language-bash">$ sudo vim /usr/share/sddm/scripts/Xsetup
</code></pre>
<p>加入下列内容：</p>
<pre><code class="language-bash">xrandr --setprovideroutputsource modesetting NVIDIA-0
xrandr --auto
</code></pre>
<p>输入下列命令获知本机的显卡型号及PCI地址：</p>
<pre><code class="language-bash">$ lspci -k | grep -A 2 -E &quot;(VGA|3D)&quot;
$ sudo vim /etc/X11/xorg.conf
</code></pre>
<p>在该文件(没有会自动创建一个)中输入下列内容：</p>
<pre><code class="language-bash">Section &quot;Module&quot;
	Load &quot;modesetting&quot;
EndSection

Section &quot;Device&quot;
	Indentifier &quot;nvidia&quot;
	Driver &quot;nvidia&quot;
	BusID &quot;1:0:0&quot; #填入刚才获得的显卡PCI地址，注意每部分均为个位数
	Option &quot;AllowEmptyInitialConfiguration&quot;
EndSection
</code></pre>
<p>配置以上部分，重启之后Arch Linux应该就能顺利进入<code>sddm</code>登录管理器了。</p>
<p><strong>问题：配备<code>intel</code>集成显卡和<code>NVIDIA</code>独立显卡的机器登入图形界面时机器挂起/关机</strong></p>
<p>首先，需要注明的是，这是Linux对于<code>NVIDIA</code>显卡驱动支持不完善的问题引起的。但硬件驱动支持不完善是典型的<strong>上游错误</strong>(NVIDIA显卡没有发挥它的作用是NVIDIA团队的问题，而不是Arch开发者的责任)。</p>
<p>如果不启动图形界面，只用<code>tty</code>，是没有问题的。</p>
<p>解决方法：</p>
<ul>
<li>
<p>如果你将你的<code>Display Manager</code>加入了守护进程(即每次会自动登入<code>Display Manager</code>)，那么我目前能想到的方法是使用<code>Live CD</code>，将你的Arch Linux挂载在<code>Live CD</code>上，然后使用<code>arch-chroot</code>操作。</p>
</li>
<li>
<p>如果你开机进入的是<code>tty</code>(即你每次都是手动启动图形界面)，那么就按照平时在终端中的操作来进行操作即可。</p>
</li>
<li>
<p>操作如下：</p>
</li>
</ul>
<pre><code class="language-bash">$ sudo pacman -S bumblebee   # 安装bumblebee
$ sudo nano /etc/modprobe.d/modprobe.conf
#在文件中添加“options nvidia NVreg_Mobile=1”，然后保存退出，重启机器
</code></pre>
<h3 id="安装图形网络管理工具">安装图形网络管理工具：</h3>
<pre><code class="language-bash">$ sudo pacman -S networkmanager #一般来说你应该已经安装过了，此处以防万一。
$ sudo pacman -S net-tools
$ sudo systemctl enable NetworkManager #开启网络管理服务
$ sudo systemctl enable dhcpcd
</code></pre>
<h3 id="安装声音相关的软件">安装声音相关的软件：</h3>
<pre><code class="language-bash">$ sudo pacman -S alsa-utils pulseaudio pulseaudio-alsa
</code></pre>
<h3 id="安装yay">安装Yay：</h3>
<p>Yay是AUR的包管理器。(也可以使用yaourt，见下)</p>
<pre><code class="language-bash">$ git clone https://aur.archlinux.org/yay.git --depth=1
$ cd yay
$ makepkg -si #编译安装
$ sudo pacman -Qs yay #安装完成后可以通过这条命令查看yay是否安装
</code></pre>
<blockquote>
<p>注意1：</p>
<p>在安装yay时要改为普通用户，否则Manjaro发行版在makepkg的时候可能报错。因为root在makepkg时可能会造成毁灭性灾难，因此是不被允许的。但如果先以root账户克隆文件，再以普通用户安装时，又会提示权限不够，还需要sudo chown，相当麻烦。</p>
<p>注意2：</p>
<p>在makepkg时出现<code>==&gt;错误： Cannot find the fakeroot binary. ==&gt; 错误： Cannot find the strip binary required for object file stripping.</code> 是因为缺少打包基本工具，即<code>base-devel</code>，需要先安装这个软件包组。</p>
<p>注意3：</p>
<p>其实，直接执行<code>sudo pacman -S yay</code>也能得到yay。构建是为了熟悉这种从源代码开始打包安装的过程。任何从AUR软件仓库上下载软件的用户都应该会这种构建过程，否则可能在安装软件中出现毁灭性灾难。</p>
</blockquote>
<p>配置中国镜像：</p>
<pre><code class="language-bash">$ yay --aururl &quot;https://aur.tuna.tsinghua.edu.cn&quot; --save
</code></pre>
<p>配置文件的位置位于<code>~/.config/yay/config.json</code>，也可通过下面的命令查看修改过的配置：</p>
<pre><code class="language-bash">$ yay -P -g
</code></pre>
<h3 id="安装yaourt">安装Yaourt</h3>
<p>Yaourt也是AUR的包管理器，但已经停止更新，故建议使用yay。</p>
<pre><code>sudo pacman -S yaourt #安装Yaourt
#配置Yaourt
#添加之前首先备份原文件（这是可选的）
cp /etc/yaourtrc /etc/yaourtrc.backup
#修改 /etc/yaourtrc配置文件
vim /etc/yaourtrc
#去掉#AURURL 的注释,并修改
AURURL=“https://aur.tuna.tsinghua.edu.cn”
</code></pre>
<h3 id="安装中文输入法">安装中文输入法：</h3>
<h4 id="fcitx">※Fcitx</h4>
<p>如果安装的是中州韵、谷歌拼音、sun拼音、cloud拼音等非搜狗输入法，具体命令如下：</p>
<pre><code class="language-bash">$ sudo pacman -S fcitx fcitx-im fcitx-configtool #输入法框架及管理器
$ sudo pacman -S fcitx-rime #中州韵输入法
$ sudo pacman -S fcitx-googlepinyin #谷歌拼音输入法
$ sudo pacman -S fcitx-cloudpinyin #cloud拼音输入法
</code></pre>
<blockquote>
<p>注：可以用这些输入法组合搜狗输入法的词库，相比直接使用搜狗拼音输入法来说，稳定性更好。</p>
</blockquote>
<p>如果安装搜狗拼音输入法，则输入法框架选用的是<code>fcitx-lilydjwg-git</code>(这是fcitx-qt4的archlinuxcn源包名)；可以先查询一下：</p>
<pre><code class="language-shell">$ sudo pacman -S fcitx fcitx-im fcitx-configtool
$ pacman -Ss fcitx-qt4 #该命令是查询软件包命令，会返回软件包名，以该名为准。
</code></pre>
<p>如果没有像前文一样正确配置archlinuxcn源，则上述查询命令不会有返回结果，需要用yay安装或者正确配置archlinuxcn源。</p>
<pre><code class="language-shell">$ sudo pacman -S fcitx-qt4 #该软件包以上个命令返回为准
$ sudo pacman -S fcitx-sogoupinyin #安装搜狗拼音输入法
</code></pre>
<p>注：据说Gnome(GTK)用户要安装fcitx-qt5，其可选依赖于fcitx-configtool；而KDE(QT)用户则需要安装软件包kcm-fcitx；该包中包含qt5；如果完全根据情境安装，非常复杂，我的建议是：小孩子才做选择，大人我全都要。遇到软件包冲突后再根据提示进行卸载操作。</p>
<p>编辑相关文档：</p>
<pre><code class="language-bash">$ vim /home/&lt;username&gt;/.xprofile #激活fcitx和桌面环境语言设定
</code></pre>
<p>编辑内容如下：</p>
<pre><code class="language-bash">export GTK_IM_MODULE=fcitx
export QT_IM_MODULE=fcitx
export XMODIFIERS=&quot;@im=fcitx&quot;
</code></pre>
<blockquote>
<p>注1：<code>.xprofile</code>文件生成后需要注销或重启级别的操作才能生效。未生成该文件或该文件未生效，则中文输入法不会出现汉字候选框。</p>
<p>注2：如果提示搜狗拼音输入法出现问题，请按提示删除<code>~/.config/sogouPY*</code>两个文件夹后重启<code>fcitx</code>。</p>
</blockquote>
<h4 id="中文字体包及emoji">中文字体包及emoji</h4>
<pre><code class="language-bash">$ yay -S ttf-linux-libertine ttf-inconsolata ttf-joypixels ttf-twemoji-color noto-fonts-emoji ttf-liberation ttf-droid   #Emoji安装

$ yay -S wqy-bitmapfont wqy-microhei wqy-microhei-lite wqy-zenhei adobe-source-han-mono-cn-fonts adobe-source-han-sans-cn-fonts adobe-source-han-serif-cn-fonts #中文字体
</code></pre>
<h4 id="ibus">IBUS</h4>
<p>IBUS输入法管理器是<code>fcitx</code>的替代品，自行查找安装方式。</p>
<h3 id="安装git">安装Git</h3>
<pre><code class="language-bash">$ sudo pacman -S git #Manjaro Linux发行版已经安装了git
</code></pre>
<h3 id="安装浏览器">安装浏览器</h3>
<p>浏览器的可选项比较多，下面列举几个以供参考。</p>
<p><strong>FireFox</strong>：火狐浏览器，支持多扩展。</p>
<p><strong>Google-Chrome</strong>：谷歌浏览器，它类似Linux中的Arch，具体优点不赘述。</p>
<p><strong>Chromium</strong>：开源、支持多扩展的谷歌浏览器(工程版)。</p>
<p><strong>Midori</strong>：轻量、快速的浏览器。</p>
<pre><code class="language-bash">$ yay -S google-chrome #或者google-chrome-stable
$ sudo pacman -S firefox
$ sudo pacman -S chromium
$ sudo pacman -S midori
</code></pre>
<h2 id="advanced-apps">Advanced Apps</h2>
<h3 id="社交软件">社交软件</h3>
<h4 id="安装qq和tim">安装QQ和TIM</h4>
<pre><code class="language-bash">$ sudo pacman -S deepin.com.qq.im
$ sudo pacman -S deepin.com.qq.office
</code></pre>
<h4 id="安装微信">安装微信</h4>
<pre><code class="language-bash">$ sudo pacman -S electronic-wechat   # 基于Electron的微信，本质上是网页版的微信
$ sudo pacman -S wine-wechat         # Wine集成的Windows平台的微信
# wine-wechat可能需要安装wine-mono字体，它建议使用pacman进行管理：
# sudo pacman -S wine-mono
</code></pre>
<p>至于它们运行所遇到的问题，建议阅读下一篇博客。</p>
<h3 id="音乐播放器">音乐播放器</h3>
<pre><code class="language-bash">$ yay -S netease-cloud-music
</code></pre>
<h3 id="下载工具">下载工具</h3>
<p>Transmission</p>
<pre><code class="language-bash">$ sudo pacman -S transmission-qt    # 基于Qt的图形化界面
$ sudo pacman -S transmission-gtk   # 基于GTK的图形化界面
# 两种皆可
</code></pre>
<p>qBittorrent</p>
<pre><code class="language-bash">$ sudo pacman -S qbittorrent
</code></pre>
<h3 id="视频播放工具">视频播放工具</h3>
<p>VLC</p>
<pre><code class="language-bash">$ sudo pacman -S vlc
</code></pre>
<h3 id="磁盘无损分区工具">磁盘无损分区工具</h3>
<p>Gparted</p>
<pre><code class="language-bash">$ sudo pacman -S gparted
</code></pre>
<h3 id="安装电池选项">安装电池选项</h3>
<p>TLP，提供优秀的 Linux 高级电源管理功能,不需要你了解所有的技术细节。默认配置已经对电池使用时间进行了优化，只要安装即可享受更长的使用时间。除此之外，TLP 也是高度可配置的，可以满足各种特定需求。</p>
<p>参考<a href="gitHub.com/linrunner/TLP">官方文档</a>，等待补充。</p>
<pre><code class="language-bash">$ sudo pacman -S tlp
</code></pre>
<h3 id="安装蓝牙设备管理器">安装蓝牙设备管理器</h3>
<p>Blueman</p>
<pre><code class="language-bash">$ sudo pacman -S blueman
</code></pre>
<p>使用之前需要将<code>bluetooth</code>添加至守护进程：</p>
<pre><code class="language-bash">$ sudo systemctl enable bluetooth
</code></pre>
<h3 id="文件系统ntfs挂载工具">文件系统NTFS挂载工具</h3>
<p>NTFS-3G</p>
<pre><code class="language-bash">$ sudo pacman -S ntfs-3g
</code></pre>
<h3 id="系统托盘工具">系统托盘工具</h3>
<p>Trayer，注意，该工具只适合在未配系统托盘的窗口管理器（如dwm）中使用。</p>
<pre><code class="language-bash">$ sudo pacman -S trayer
</code></pre>
<p><code>trayer</code>有很多的选项。对于只使用窗口管理器的人来说，可以参考如下启动选项：</p>
<pre><code class="language-bash">trayer --transparent true --expand false --align right --width 20 --SetDockType false --tint 0x88888888 &amp;
</code></pre>
<h3 id="电池状况监控工具">电池状况监控工具</h3>
<p>ACPI</p>
<pre><code class="language-bash">$ sudo pacman -S acpi
</code></pre>
<h3 id="图形化的解压缩软件">图形化的解压缩软件</h3>
<p>Xarchiver</p>
<pre><code class="language-bash">$ sudo pacman -S xarchiver
</code></pre>
</article>

                    
                    
                    
                    <div class="py-2">
  
    <div class="my-8 flex flex-col items-center md:flex-row">
      <a href="https://endlesspeak.github.io/authors/endlesspeak/" class="md:me-4 text-primary-text h-24 w-24">
        
        
          <img
            src="https://endlesspeak.github.io/images/avtar.png"
            class="bg-primary-bg w-full rounded-full"
            alt="Avatar"
          />
        
      </a>
      <div class="mt-4 w-full md:mt-0 md:w-auto">
        <a
          href="https://endlesspeak.github.io/authors/endlesspeak/"
          class="mb-2 block border-b pb-1 text-lg font-bold"
        >
          <h3>Serene Feather Pavilion</h3>
        </a>
        <span class="block pb-2">瞽者无以与乎文章之观,聋者无以与乎钟鼓之声。岂唯形骸有聋盲哉?</span>
        
          
          
          
          
          <a href="mailto:endlesspeak@163.com" class="me-2">
            <i class="fas fa-envelope"></i>
          </a>
        
          
          
          
          
          <a href="https://gitee.com/endlesspeak" class="me-2">
            <i class="fab fa-git-square"></i>
          </a>
        
          
          
          
          
          <a href="https://github.com/endlesspeak" class="me-2">
            <i class="fab fa-github"></i>
          </a>
        
          
          
          
          
          <a href="https://space.bilibili.com/316071845" class="me-2">
            <i class="fas fa-tv"></i>
          </a>
        
      </div>
    </div>
  
</div>

                    

                    



                    
  <div
    class="-mx-2 mt-4 flex flex-col border-t px-2 pt-4 md:flex-row md:justify-between"
  >
    <div>
      
    </div>
    <div class="mt-4 md:mt-0 md:text-right">
      
        <span class="text-primary-text block font-bold">下一页</span>
        <a href="https://endlesspeak.github.io/docs/build/operating-system-configuration/linux-technology-5-2-textmode-config/" class="block">Arch Linux 文本环境配置</a>
      
    </div>
  </div>


                    



                </div>
                
                <div class="hidden lg:block lg:w-1/4">
                    
                    <div
  class="
    bg-secondary-bg
   prose sticky top-16 z-10 hidden px-6 py-4 lg:block"
>
  <h3>本页内容</h3>
</div>
<div
  class="sticky-toc 
    border-s
   hidden px-6 pb-6 lg:block"
>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#initialization">Initialization</a></li>
    <li><a href="#deepin">Deepin</a></li>
    <li><a href="#kde-plasma">KDE Plasma</a></li>
    <li><a href="#basic-apps">Basic Apps</a>
      <ul>
        <li><a href="#nvidia">NVIDIA</a></li>
        <li><a href="#安装图形网络管理工具">安装图形网络管理工具：</a></li>
        <li><a href="#安装声音相关的软件">安装声音相关的软件：</a></li>
        <li><a href="#安装yay">安装Yay：</a></li>
        <li><a href="#安装yaourt">安装Yaourt</a></li>
        <li><a href="#安装中文输入法">安装中文输入法：</a></li>
        <li><a href="#安装git">安装Git</a></li>
        <li><a href="#安装浏览器">安装浏览器</a></li>
      </ul>
    </li>
    <li><a href="#advanced-apps">Advanced Apps</a>
      <ul>
        <li><a href="#社交软件">社交软件</a></li>
        <li><a href="#音乐播放器">音乐播放器</a></li>
        <li><a href="#下载工具">下载工具</a></li>
        <li><a href="#视频播放工具">视频播放工具</a></li>
        <li><a href="#磁盘无损分区工具">磁盘无损分区工具</a></li>
        <li><a href="#安装电池选项">安装电池选项</a></li>
        <li><a href="#安装蓝牙设备管理器">安装蓝牙设备管理器</a></li>
        <li><a href="#文件系统ntfs挂载工具">文件系统NTFS挂载工具</a></li>
        <li><a href="#系统托盘工具">系统托盘工具</a></li>
        <li><a href="#电池状况监控工具">电池状况监控工具</a></li>
        <li><a href="#图形化的解压缩软件">图形化的解压缩软件</a></li>
      </ul>
    </li>
  </ul>
</nav>
</div>
<script>
  window.addEventListener("DOMContentLoaded", () => {
    enableStickyToc();
  });
</script>

                    
                </div>
                
            </div>

        </div>


    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        
        hljs.highlightAll();
        changeSidebarHeight();
        switchDocToc();
    })
</script>









          </div>
        </div>
      
    </main>
    <footer class="pl-scrollbar">
      <div class="mx-auto w-full max-w-screen-2xl"><div class="text-center p-6 pin-b">
    <p class="text-sm text-tertiary-text">&copy; 2021 <a href="https://www.wangchucheng.com/">C. Wang</a> and <a href="https://www.ruiqima.com/">R. Ma</a>
 &middot;  Powered by the <a href="https://github.com/wangchucheng/hugo-eureka" class="hover:text-eureka">Eureka</a> theme for <a href="https://gohugo.io" class="hover:text-eureka">Hugo</a></p>
</div></div>
    </footer>
  </body>
</html>
