#+TITLE: RDP 远程桌面连接
#+DATE: <2023-07-07 Fri>
#+AUTHOR: EndlessPeak
#+TOC: true
#+HIDDEN: false
#+DRAFT: false
#+WEIGHT: 6
#+Description: 本文记录了如何基于RDP进行远程桌面连接的步骤。

RDP(Remote Desktop Protocol)是一种远程桌面协议，由微软开发用于远程连接和控制计算机。允许用户通过网络从本地计算机的远程桌面客户端连接到远程计算机。

* Server
在需要被远程控制的计算机上安装 =xrdp= 程序。

#+begin_quote
xRDP 是一个开源的 RDP 服务器程序，可以在 Linux 上提供 RDP 服务。

它允许 Windows 系统上的远程桌面客户端通过 RDP 连接到 Linux 机器，并在远程桌面上进行图形界面操作。

xRDP 可以与不同的桌面环境（如 GNOME、Xfce、MATE 等）配合使用。
#+end_quote

配置 =xrdp= 步骤如下所述：
1. 安装 =xrdp= ： ~sudo apt install xrdp~
2. 启动 =xrdp= 服务： ~sudo systemctl enable xrdp~
3. 设置防火墙规则
   在 ubuntu 发行版上，使用 =ufw= 配置防火墙规则。
   #+begin_src sh
     sudo ufw status
     sudo ufw enable
     sudo ufw allow 3389/tcp
     sudo ufw status
   #+end_src

* Client
Windows 默认安装有 =msctc= ，可以直接用于远程桌面控制。

** Freerdp
Linux 可以考虑安装 =freerdp= ，它提供了一个 =xfreerdp= 命令用于连接远程计算机。

=xfreerdp= 的基本使用方式如下：
#+begin_src sh
  xfreerdp /u:<username> /p:<password> /v:<remote>
#+end_src

1. 用户名和密码参数：
   1. /u:用户名：指定要用于连接的用户名。
   2. /p:密码：指定与用户名对应的密码。
2. 远程计算机地址参数：/v: 远程计算机地址：指定要连接的远程计算机的地址。
   它可以是 IP 地址、域名或计算机名称。
3. 远程桌面分辨率参数：/size: 宽度 x 高度：指定远程桌面的分辨率。
   例如，/size:1024x768 将设置远程桌面的分辨率为 1024x768 像素。
4. 远程音频参数：/audio-mode:模式：指定远程音频的传输方式。
   可以选择的模式包括 none（禁用音频）、local（在本地播放音频）和 remote（在远程计算机上播放音频）。
5. 远程文件共享参数：/drive:本地路径，远程路径：通过此参数可以共享本地计算机的硬盘驱动器。
   指定本地路径和远程路径后，远程计算机就可以访问本地路径所对应的文件和文件夹。
6. 远程连接体验参数：
   1. /wallpaper:模式：控制是否在远程桌面上显示壁纸。可以选择的模式包括 yes（显示壁纸）和 no（不显示壁纸）。
   2. /fonts:模式：控制是否在远程桌面上使用远程计算机的字体。可以选择的模式包括 yes（使用远程计算机的字体）和 no（不使用远程计算机的字体）

** KRDC
KRDC 是一个用于 Linux 操作系统的远程桌面客户端程序，它基于开源的 RDP 协议实现，可以与远程桌面服务器进行连接，并在本地计算机上显示和操作远程桌面。

1. 连接到远程计算机：通过 KRDC，你可以连接到远程计算机，可以是运行 Windows 的计算机或者其他支持 RDP 协议的远程桌面服务器。你需要提供远程计算机的 IP 地址、域名或主机名来建立连接。
2. 建立连接配置：KRDC 允许你设置各种连接选项，如用户名、密码、域、远程计算机的分辨率等。你可以根据需要进行配置，以实现最佳的远程桌面体验。
3. 窗口管理和显示：KRDC 提供了多种窗口管理选项。你可以选择连接到远程桌面时显示远程桌面的全屏窗口，或者选择显示在一个窗口中。你还可以根据需要调整远程桌面的分辨率和窗口大小。
4. 文件传输和剪贴板共享：KRDC 允许你在本地计算机和远程计算机之间进行文件传输，并且支持剪贴板共享，方便在本地和远程桌面之间复制和粘贴文本或文件。
5. 远程会话管理：你可以在 KRDC 中管理和切换多个远程会话。这意味着你可以同时连接到多个远程计算机，轻松切换并对其进行操作。
6. 连接历史记录：KRDC 会自动保存你的连接历史记录，使你可以轻松选择最近连接过的远程计算机。

=KRDC= 在底层上依赖 =freerdp=，但是也许你不必先安装 =freerdp= 。 
